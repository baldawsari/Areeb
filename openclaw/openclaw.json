{
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "lan",
    "auth": {
      "mode": "token",
      "token": "${OPENCLAW_GATEWAY_TOKEN}"
    },
    "trustedProxies": ["192.168.65.0/24", "172.16.0.0/12"],
    "controlUi": {
      "enabled": true,
      "allowInsecureAuth": true,
      "dangerouslyDisableDeviceAuth": true,
      "dangerouslyAllowHostHeaderOriginFallback": true
    }
  },
  "tools": {
    "sessions": {
      "visibility": "all"
    },
    "agentToAgent": {
      "enabled": true,
      "allow": ["orchestrator", "analyst", "pm", "architect", "developer", "tester", "scrum-master"]
    }
  },
  "agents": {
    "defaults": {
      "contextPruning": { "mode": "cache-ttl", "ttl": "1h" },
      "compaction": { "mode": "safeguard" },
      "heartbeat": { "every": "30m" }
    },
    "list": [
      {
        "id": "orchestrator",
        "name": "Orchestrator",
        "default": true,
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/orchestrator",
        "subagents": {
          "allowAgents": ["*"]
        }
      },
      {
        "id": "analyst",
        "name": "Business Analyst",
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/analyst"
      },
      {
        "id": "pm",
        "name": "Product Manager",
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/pm"
      },
      {
        "id": "architect",
        "name": "Solutions Architect",
        "model": "anthropic/claude-opus-4-6",
        "workspace": "/app/agents/architect"
      },
      {
        "id": "developer",
        "name": "Senior Developer",
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/developer"
      },
      {
        "id": "tester",
        "name": "QA Engineer",
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/tester"
      },
      {
        "id": "scrum-master",
        "name": "Scrum Master",
        "model": "anthropic/claude-sonnet-4-6",
        "workspace": "/app/agents/scrum-master"
      }
    ]
  },
  "channels": {
    "telegram": {
      "enabled": true,
      "botToken": "${TELEGRAM_BOT_TOKEN}",
      "dmPolicy": "open",
      "allowFrom": ["*"],
      "groupPolicy": "allowlist",
      "streaming": "off"
    }
  },
  "bindings": [
    {
      "agentId": "orchestrator",
      "match": {
        "channel": "telegram",
        "peer": {
          "kind": "direct",
          "id": "${ADMIN_TELEGRAM_ID}"
        }
      }
    },
    {
      "agentId": "orchestrator",
      "match": { "channel": "*" }
    }
  ],
  "plugins": {
    "entries": {
      "telegram": {
        "enabled": true
      }
    }
  }
}
